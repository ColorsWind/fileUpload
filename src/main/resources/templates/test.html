
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>文件收集列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <script src="/static/js/jquery-3.3.1.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="/static/js/echarts.js"></script>

</head>
<body>

<div th:insert="~{base :: navbar}"/>


<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width: 1200px;height:800px;"></div>
<script type="text/javascript">
    // 绘制图表。
    var myChart = echarts.init(document.getElementById('main'));

    myChart.showLoading();
    var dateList = [];
    var valueList = [];
    // 获取数据
    $.ajax({
        url: '/dayCount',
        type: "get",
        contentType:  "application/x-www-form-urlencoded", //"application/json", 内容编码类型，默认
        dataType: "json", // 预期服务器返回数据格式
        timeout: 3000, // 超时时间，60s
        data: {}, // 请求参数
        success: function(data){
            for (var i=0;i< data.length;i++){
                dateList.push(data[i].day);
                valueList.push(data[i].count);
            }
            myChart.hideLoading();
            myChart.setOption({
                visualMap: [{
                    show: false,
                    type: 'continuous',
                    seriesIndex: 0,
                    min: 0,
                    max: 10000          // 设置颜色区间
                }],

                title: [{
                    left: 'center',
                    text: '30天网站访问量统计'
                }],
                tooltip: {
                    trigger: 'axis'
                },
                xAxis: [{
                    data: dateList
                }],
                yAxis: [{
                    name: '日访问量',
                    splitLine: {show: false}
                }],
                grid: [{
                    bottom: '60%'
                }, {
                    top: '60%'
                }],
                series: [{
                    type: 'line',
                    showSymbol: false,
                    data: valueList
                }]
            });

            dateList = [];
            valueList = [];
        }
    });


</script>

<footer th:insert="~{base :: footer}" class="navbar-fixed-bottom"/>

</body>
</html>